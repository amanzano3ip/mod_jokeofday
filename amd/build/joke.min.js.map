{"version":3,"file":"joke.min.js","sources":["../src/joke.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @author  2024 3iPunt <https://www.tresipunt.com/>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable no-debugger */\n\ndefine([\n    'jquery',\n    'core/str',\n    'core/ajax',\n    'core/templates'\n], function(\n    $,\n    Str,\n    Ajax,\n    Templates, ) {\n\n    /**\n     *\n     */\n    let ACTION = {\n        SCORE_SELECT: '[data-action=\"score\"]'\n    };\n\n    /**\n     *\n     */\n    let SERVICES = {\n        SCORE: 'mod_jokeofday_joke_score'\n    };\n\n    /**\n     * @param {String} region\n     * @param {Integer} id\n     * @param {Integer} cmid\n     * @constructor\n     */\n    function Joke(region, id, cmid) {\n        this.node = $(region);\n        this.id = id;\n        this.cmid = cmid;\n        this.node.find(ACTION.SCORE_SELECT).on('change', this.scoreSelectChange.bind(this));\n    }\n\n    Joke.prototype.scoreSelectChange = function (e) {\n        let $target = $(e.currentTarget);\n        const value = $target.val();\n\n        // Realizar llamada AJAX.\n        const request = {\n            methodname: SERVICES.SCORE,\n            args: {\n                jokeid: this.id,\n                score: value,\n                cmid: this.cmid\n            }\n        };\n\n        Ajax.call(([request]))[0]\n            .done(function (response) {\n                if (response.success) {\n                    console.log('LA PETICIÃ“N ES CORRECTA');\n                    console.log(response.data);\n                } else {\n                    console.log(response.error);\n                }\n        }).fail(function (fail) {\n            console.log(fail);\n        });\n\n    };\n\n    Joke.prototype.node = null;\n\n    return {\n\n        /**\n         * @param {String} region\n         * @param {Integer} id\n         * @param {Integer} cmid\n         * @returns {Joke}\n         */\n        initJoke: function(region, id, cmid) {\n            return new Joke(region, id, cmid);\n        }\n\n    };\n});\n"],"names":["define","$","Str","Ajax","Templates","ACTION","SERVICES","Joke","region","id","cmid","node","find","on","this","scoreSelectChange","bind","prototype","e","value","currentTarget","val","request","methodname","args","jokeid","score","call","done","response","success","console","log","data","error","fail","initJoke"],"mappings":";;;;AAwBAA,4BAAO,CACH,SACA,WACA,YACA,mBACD,SACCC,EACAC,IACAC,KACAC,eAKIC,oBACc,wBAMdC,eACO,oCASFC,KAAKC,OAAQC,GAAIC,WACjBC,KAAOV,EAAEO,aACTC,GAAKA,QACLC,KAAOA,UACPC,KAAKC,KAAKP,qBAAqBQ,GAAG,SAAUC,KAAKC,kBAAkBC,KAAKF,cAGjFP,KAAKU,UAAUF,kBAAoB,SAAUG,SAEnCC,MADQlB,EAAEiB,EAAEE,eACIC,MAGhBC,QAAU,CACZC,WAAYjB,eACZkB,KAAM,CACFC,OAAQX,KAAKL,GACbiB,MAAOP,MACPT,KAAMI,KAAKJ,OAInBP,KAAKwB,KAAM,CAACL,UAAW,GAClBM,MAAK,SAAUC,UACRA,SAASC,SACTC,QAAQC,IAAI,2BACZD,QAAQC,IAAIH,SAASI,OAErBF,QAAQC,IAAIH,SAASK,UAE9BC,MAAK,SAAUA,MACdJ,QAAQC,IAAIG,UAKpB5B,KAAKU,UAAUN,KAAO,KAEf,CAQHyB,SAAU,SAAS5B,OAAQC,GAAIC,aACpB,IAAIH,KAAKC,OAAQC,GAAIC"}